\subsection{Coin Flips: Simulation vs Expectation}

\subsubsection*{Problem}
Flip a fair coin $n$ times. Let $X$ be the number of heads.
What is $\mathbb{E}[X]$?
How could we sanity-check the result via simulation?

\subsubsection*{Assumptions}
\begin{itemize}
  \item The coin is fair: $P(\text{Heads}) = P(\text{Tails}) = \tfrac{1}{2}$.
  \item Flips are independent.
\end{itemize}

\subsubsection*{Intuition}
Each flip contributes either $1$ head or $0$ heads.
On average, a single flip contributes $\tfrac{1}{2}$ head, so across $n$ flips
we expect about $\tfrac{n}{2}$ heads.

\subsubsection*{Reasoning}
Write $X = \sum_{i=1}^{n} I_i$, where $I_i = 1$ if flip $i$ is heads and $0$
otherwise.

Then:
\[
\mathbb{E}[X] = \sum_{i=1}^{n} \mathbb{E}[I_i]
\]
and since $\mathbb{E}[I_i] = P(I_i = 1) = \tfrac{1}{2}$ for a fair coin:
\[
\mathbb{E}[X] = n \cdot \tfrac{1}{2} = \tfrac{n}{2}.
\]

\subsubsection*{Procedure (Simulation Pseudocode)}
\begin{algorithm}[H]
\caption{Monte Carlo sanity check for $\mathbb{E}[X]$}
\KwIn{$n$ flips per trial, $T$ trials}
\KwOut{Estimated mean number of heads}

\textbf{sumHeads} $\leftarrow 0$\;
\For{$t \leftarrow 1$ \KwTo $T$}{
  \textbf{heads} $\leftarrow 0$\;
  \For{$i \leftarrow 1$ \KwTo $n$}{
    sample $U \sim \text{Uniform}(0,1)$\;
    \If{$U < 1/2$}{
      \textbf{heads} $\leftarrow$ \textbf{heads} $+ 1$\;
    }
  }
  \textbf{sumHeads} $\leftarrow$ \textbf{sumHeads} $+ \textbf{heads}$\;
}
\Return $\textbf{sumHeads} / T$\;
\end{algorithm}

\subsubsection*{Sanity Check}
\begin{itemize}
  \item For $n=1$, $\mathbb{E}[X] = 0.5$ makes sense.
  \item For large $n$, the estimate should concentrate near $n/2$.
  \item If you plot the histogram of heads across trials, it should look roughly binomial.
\end{itemize}

\subsubsection*{Takeaway}
For $n$ independent fair coin flips, the expected number of heads is:
\[
\mathbb{E}[X] = \tfrac{n}{2}.
\]
Simulation provides a quick sanity check without changing the underlying reasoning.
